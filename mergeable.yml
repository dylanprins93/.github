version: 2
mergeable:
  - when: pull_request.*, pull_request_review.*
    name: 'Checking required files'
    filter:
      - do: repository
        visibility: 'public'
    validate:
    - do: and
      validate:
        - do: contents
          files: # determine which files contents to validate
            pr_diff: false # If true, validator will grab all the added and modified files in the head of the PR
          must_include:
             regex: 'LICENSE'
             message: 'must include a License file'
        - do: contents
          files: # determine which files contents to validate
            pr_diff: false # If true, validator will grab all the added and modified files in the head of the PR
          must_include:
             regex: 'CONTRIBUTING.md'
             message: 'must include a contributing file'
    fail:
      - do: checks # default pass case
        status: 'failure' # Can be: success, failure, neutral, cancelled, timed_out, or action_required
        payload:
          title: 'Must have the required files'
          summary: "Must have a required files"

  - when: pull_request.opened
    name: "Greet a contributor"
    validate: []
    pass:
      - do: comment
        payload:
          body: >
            Thanks for creating a pull request! A maintainer will review your changes shortly. Please don't be discouraged if it takes a while.
